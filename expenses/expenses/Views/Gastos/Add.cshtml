@model experses.Models.GastosViewModels

@{
    /**/

    /**/

    /**/


    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using (Html.BeginForm("Add", "Gastos", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{

    @Html.AntiForgeryToken()
    <br />
    <br />
    <br />


    @Html.ValidationSummary(false, "", new { @class = "error" })

    <div class="container">

        <div class="row">
            <div class="form-group">

                <div class="col-md-2">@Html.LabelFor(m => m._idSelectedGrupoGasto, @expenses.Resources.Descripciones.AddGastoGrupoGasto, htmlAttributes: new { @class = "control-label" })</div>
                <div class="col-md-4">@Html.DropDownListFor(Model => Model._idSelectedGrupoGasto, new SelectList(Model._GrupoGastosTrad, "Value", "Text"), new { @class = "form-control" })</div>
                <div class="col-md-2">@Html.LabelFor(m => m._idSelectedGasto, @expenses.Resources.Descripciones.AddGastoTipoGasto, htmlAttributes: new { @class = "control-label" })</div>
                <div class="col-md-4">@Html.DropDownListFor(Model => Model._idSelectedGasto, new SelectList(Model._TipoGastosTrad, "Value", "Text"), "", new { @id = "ddlTipoGasto", @class = "form-control" })</div>

            </div>
        </div>


        <div class="row">
            <div class="form-group">

                <div class="col-md-2">@Html.Label(expenses.Resources.Descripciones.AddGastoSubTipoGasto, htmlAttributes: new { @class = "control-label" })</div>
                <div class="col-md-4" id="subtypes"> <select id="ddlSubTipoGasto" name="IdSubType" class='form-control'></select> </div>
                <div class="col-md-2">@Html.LabelFor(m => m.EsRegalo, @expenses.Resources.Descripciones.EsRegalo, new { @class = "control-label" })</div>
                <div class="col-md-4">@Html.CheckBoxFor(m => m.EsRegalo)</div>
            </div>
        </div>


        <div class="row">
            <div class="form-group">
                <div class="col-md-2">@Html.LabelFor(m => m.Concepto, @expenses.Resources.Descripciones.AddGastoConcepto, new { @class = "control-label" })</div>
                <div class="col-md-4">@Html.TextBoxFor(m => m.Concepto, new { @id = "txtConcepto", @class = "form-control" })</div>
                <div class="col-md-2">@Html.LabelFor(m => m.Fecha, @expenses.Resources.Descripciones.AddGastoFecha, new { @Value = Model.Fecha.ToString("d"), @class = "control-label" })</div>
                <div class="col-md-4">@Html.TextBoxFor(m => m.Fecha, Model._FormatoFecha, new { @class = "form-control" })</div>

            </div>
        </div>

        <div class="row">
            <div class="form-group">
                <div class="col-md-2">
                    @Html.LabelFor(m => m.Importe, @expenses.Resources.Descripciones.AddGastoImporte, new { @class = "control-label" })
                </div>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.Importe, new { @class = "form-control", id = "txtImporte" })

                </div>
                <div class="col-md-2">@Html.LabelFor(m => m._idSelectedTipoPagoGasto, @expenses.Resources.Descripciones.AddGastoTipoPago, new { @class = "control-label" })</div>
                <div class="col-md-4">
                    @foreach (var rb in Model._TipoPagoList)
                    {
                        <div>
                            @Html.RadioButtonFor(m => m._idSelectedTipoPagoGasto, rb.idTipoPago)
                            @Html.Label(rb.Descripcion)
                        </div>
                    }
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group">
                <div class="col-md-2">@Html.Label(expenses.Resources.Descripciones.AddGastoGastoCompartido, htmlAttributes: new { @class = "control-label" })</div>
                <div class="col-md-4">@Html.CheckBoxFor(m => m.EsCompartido, new { @id = "chkCompartido" })</div>
                <div class="col-md-2" id="divPersonasLabel">@Html.Label(expenses.Resources.Descripciones.AddGastoGastoCompartidoPersona, htmlAttributes: new { @class = "control-label" })</div>
                <div class="col-md-4" id="divPersonas">@Html.DropDownListFor(Model => Model._idSelectedPersonaConQuienComparte, new SelectList(Model._PersonasACompartir, "Value", "Text"), new { @class = "form-control" })</div>
            </div>
        </div>

        <div class="row">
            <div class="form-group">
                <div class="col-md-2">@Html.Label(expenses.Resources.Descripciones.AddGastoValoracion, htmlAttributes: new { @class = "control-label" })</div>
                <div class="col-md-4">
                    @Html.HiddenFor(x => x.Valoracion, new { id = "hdnSatisfaccion" })
                    <img id="imagen1" src="~/Img/iconos/white_star24.png" />
                    <img id="imagen2" src="~/Img/iconos/white_star24.png" />
                    <img id="imagen3" src="~/Img/iconos/white_star24.png" />
                    <img id="imagen4" src="~/Img/iconos/white_star24.png" />
                    <img id="imagen5" src="~/Img/iconos/white_star24.png" />
                    <img id="imagen6" src="~/Img/iconos/white_star24.png" />
                    <img id="imagen7" src="~/Img/iconos/white_star24.png" />
                    <img id="imagen8" src="~/Img/iconos/white_star24.png" />
                    <img id="imagen9" src="~/Img/iconos/white_star24.png" />
                    <img id="imagen10" src="~/Img/iconos/white_star24.png" />

                </div>
                <div class="col-md-2">&nbsp;</div>
                <div class="col-md-4">&nbsp;</div>
            </div>
        </div>

        <div class="row">
            <div class="col-xs-12"><input type="submit" class="btn btn-primary" name="submitButton" value="@expenses.Resources.Descripciones.btnCancel" /> <input type="submit" class="btn btn-primary" name="submitButton" value="@expenses.Resources.Descripciones.btnAdd" /></div>
        </div>

    </div>
    <script src="~/Scripts/jquery-3.3.1.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>

   

    <script type="text/javascript">



        // Initially, Hide the SSN textbox when Web Form is loaded
        $('#divPersonas').hide();
        $('#divPersonasLabel').hide();


        $(document).ready(function () {

            $.fn.myFunction = function (iStar) {
                for (var i = 1; i <= 10; i++) {
                    $('#imagen' + i).attr('src', '/Img/iconos/white_star24.png');
                }
                for (var i = 1; i <= iStar; i++) {
                    $('#imagen' + i).attr('src', '/Img/iconos/black_star24.png');
                }
                $("#hdnSatisfaccion").val(iStar);
            }


            $('#imagen1').on("click", function () {
                $.fn.myFunction(1);
            });
            $('#imagen2').on("click", function () {
                $.fn.myFunction(2);
            });
            $('#imagen3').on("click", function () {
                $.fn.myFunction(3);
            });
            $('#imagen4').on("click", function () {
                $.fn.myFunction(4);
            });
            $('#imagen5').on("click", function () {
                $.fn.myFunction(5);
            });
            $('#imagen6').on("click", function () {
                $.fn.myFunction(6);
            });
            $('#imagen7').on("click", function () {
                $.fn.myFunction(7);
            });
            $('#imagen8').on("click", function () {
                $.fn.myFunction(8);
            });
            $('#imagen9').on("click", function () {
                $.fn.myFunction(9);
            });
            $('#imagen10').on("click", function () {
                $.fn.myFunction(10);
            });

            $('#chkCompartido').on("change", function () {

                if ($(this).is(":checked")) {
                    $('#divPersonas').show();
                    $('#divPersonasLabel').show();

                } else {
                    $('#divPersonas').hide();
                    $('#divPersonasLabel').hide();
                }

            });


            $('#ddlTipoGasto').change(function () {
                $.ajax({
                    type: "post",
                    url: "GetSubTiposTipo",
                    data: { Id: $('#ddlTipoGasto').val() },
                    datatype: "json",
                    traditional: true,
                    success: function (data) {
                        var datos = "<select id='ddlSubTipoGasto' name='IdSubType' class = 'form-control'>";
                        datos = datos + '<option value=""></option>';
                        for (var i = 0; i < data.length; i++) {
                            datos = datos + '<option value=' + data[i].idSubTipo + '>' + data[i].NombreSubTipo + '</option>';
                        }
                        datos = datos + '</select>';
                        $('#subtypes').html(datos);
                        $('#txtConcepto').val("");
                    }
                });
            });
        });

        $('#subtypes').change(function () {
            $.ajax({
                type: "post",
                url: "GetDefaultValueSubTipo",
                data: { Id: $('#ddlSubTipoGasto').val() },
                datatype: "string",
                traditional: true,
                success: function (data) {

                    $('#txtConcepto').val(data);
                }
            });
        });




        $("#txtImporte").keypress(function (e) {
            //if not number display error message

            if (e.which != 8 && e.which != 44 && e.which != 46 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                //display error message
                $("#errmsg").html("only number allowed").show().fadeOut("slow");
                return false;
            }
        });


    </script>


}
